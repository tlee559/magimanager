Kadabra AI Campaign Optimization Roadmap
Current State Assessment
Rating: 7/10 - Strong Foundation, Not Yet Actionable The AI can analyze and recommend, but cannot execute changes.
What's Working
Multi-turn Gemini agent with 24 specialized tools
Google Ads API v22 integration (read operations)
Search terms analysis & wasted spend detection
Google's native recommendations surfaced
Automation framework with 5 preset rules defined
What's Missing
Campaign write operations (pause, budget, bids)
Automation executor/scheduler
Keyword management actions
Impact tracking for recommendations
Implementation Plan
Phase 1: Campaign Write Operations
Goal: Enable the AI and UI to make changes to campaigns
1.1 Google Ads API Write Functions
Add to apps/kadabra/lib/google-ads-api.ts:
// Campaign Status Changes
async function updateCampaignStatus(
  customerId: string,
  campaignId: string,
  status: 'ENABLED' | 'PAUSED'
): Promise<void>

// Budget Adjustments
async function updateCampaignBudget(
  customerId: string,
  campaignId: string,
  newBudgetMicros: number
): Promise<void>

// Keyword Bid Adjustments
async function updateKeywordBid(
  customerId: string,
  adGroupId: string,
  criterionId: string,
  newBidMicros: number
): Promise<void>

// Add Negative Keywords
async function addNegativeKeyword(
  customerId: string,
  campaignId: string,
  keyword: string,
  matchType: 'EXACT' | 'PHRASE' | 'BROAD'
): Promise<void>

// Pause/Enable Keywords
async function updateKeywordStatus(
  customerId: string,
  adGroupId: string,
  criterionId: string,
  status: 'ENABLED' | 'PAUSED'
): Promise<void>
1.2 API Routes
Create apps/kadabra/app/api/campaigns/[action]/route.ts:
POST /api/campaigns/pause - Pause campaign
POST /api/campaigns/enable - Enable campaign
POST /api/campaigns/budget - Update budget
POST /api/campaigns/keywords/bid - Update keyword bid
POST /api/campaigns/keywords/negative - Add negative keyword
POST /api/campaigns/keywords/status - Pause/enable keyword
1.3 AI Agent Tools
Add to apps/kadabra/lib/gemini-agent-v2.ts:
// New tools for the agent
- pause_campaign(campaignId, reason)
- enable_campaign(campaignId)
- adjust_budget(campaignId, newBudget, reason)
- add_negative_keyword(campaignId, keyword, matchType)
- pause_keyword(adGroupId, criterionId, reason)
- adjust_keyword_bid(adGroupId, criterionId, newBid)
Phase 2: Automation Executor
Goal: Run automation rules on a schedule
2.1 Automation Service
Create apps/kadabra/lib/automation-executor.ts:
interface AutomationExecutor {
  // Evaluate all active rules
  evaluateRules(accountId: string): Promise<ExecutionResult[]>

  // Execute a single rule
  executeRule(rule: AutomationRule): Promise<ExecutionResult>

  // Check if rule conditions are met
  evaluateConditions(rule: AutomationRule, data: MetricsData): boolean

  // Execute rule actions
  executeActions(rule: AutomationRule): Promise<ActionResult[]>
}
2.2 Cron/Scheduler
Options for scheduling:
Vercel Cron - Add to vercel.json:
{
  "crons": [{
    "path": "/api/automations/execute",
    "schedule": "0 * * * *"
  }]
}
External scheduler (if more control needed)
2.3 API Route
Create apps/kadabra/app/api/automations/execute/route.ts:
Triggered by cron or manually
Evaluates all active rules for all accounts
Respects cooldowns and daily limits
Logs all executions
Phase 3: Smart Optimization Actions
Goal: AI-driven one-click optimizations
3.1 Optimization Suggestions
Add to apps/kadabra/lib/gemini-agent-v2.ts:
// High-confidence automated suggestions
- suggest_budget_reallocation() // Move budget from losers to winners
- suggest_negative_keywords()   // Based on wasted spend analysis
- suggest_bid_adjustments()     // Based on CPA/ROAS targets
- suggest_pause_candidates()    // Low QS, high spend, no conversions
3.2 Bulk Actions UI
Enhance apps/kadabra/lib/campaigns-view.tsx:
"Apply AI Recommendations" button
Bulk pause/enable selected campaigns
Bulk budget adjustment (% increase/decrease)
Review & confirm before execution
Phase 4: Impact Tracking
Goal: Measure effectiveness of optimizations
4.1 Database Schema
Add to packages/database/prisma/schema.prisma:
model OptimizationAction {
  id            String   @id @default(cuid())
  accountId     String
  actionType    String   // BUDGET_CHANGE, PAUSE, NEGATIVE_KEYWORD, etc.
  entityType    String   // CAMPAIGN, KEYWORD, AD_GROUP
  entityId      String
  beforeValue   Json
  afterValue    Json
  reason        String?
  source        String   // AI, AUTOMATION, MANUAL
  createdAt     DateTime @default(now())

  // Impact tracking (filled in later)
  impactMeasuredAt DateTime?
  spendBefore      Float?
  spendAfter       Float?
  conversionsBefore Float?
  conversionsAfter  Float?
  roasBefore       Float?
  roasAfter        Float?
}
4.2 Impact Measurement Job
Create scheduled job to:
Look at actions from 7 days ago
Compare before/after metrics
Calculate ROI of each action type
Surface insights to AI agent
Priority Order
Priority	Feature	Complexity	Impact
1	Campaign pause/enable	Low	High
2	Budget adjustments	Low	High
3	Add negative keywords	Medium	High
4	Keyword pause/bid adjust	Medium	Medium
5	Automation executor	High	Very High
6	Impact tracking	Medium	Medium
Files to Modify
Core Implementation
apps/kadabra/lib/google-ads-api.ts - Add write functions
apps/kadabra/lib/gemini-agent-v2.ts - Add action tools
apps/kadabra/lib/automation-executor.ts - New file
apps/kadabra/lib/campaigns-view.tsx - Add action buttons
API Routes
apps/kadabra/app/api/campaigns/[action]/route.ts - New
apps/kadabra/app/api/automations/execute/route.ts - New
Database
packages/database/prisma/schema.prisma - Add OptimizationAction
Configuration
vercel.json - Add cron jobs
Feature flags - Enable write operations
Prerequisites (Waiting On)
Google Ads API Write Access - Need proper OAuth scopes for mutations
Feature Flag System - To safely roll out write operations
Audit Logging - Track all changes for compliance
Risk Mitigation
Confirmation dialogs for all destructive actions
Daily spend limits on automated actions
Rollback capability (re-enable paused items)
Dry-run mode for automations
Alerts when automation makes significant changes